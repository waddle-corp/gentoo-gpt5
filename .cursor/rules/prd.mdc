---
alwaysApply: true
---
# GenTwo PRD Quick Reference (v2)

이 규칙은 GenTwo “디지털 클론 시뮬레이션 대시보드”의 제품/기술 사양을 항상 활성 맥락으로 제공한다. 전체 상세는 [PRD.md](mdc:PRD.md) 참조.

## 제품 개요
- **좌측 패널**: 오너가 자연어로 질문 → LLM과 스트리밍 대화
- **가운데 패널**: 디지털 클론 n명이 챗봇(점원 역할)과 멀티턴 대화 후 각자 구매 여부(true/false)와 이유 기록, 대화 로그 저장/요약
- **우측 패널**: 완료된 시뮬레이션/질의 히스토리, 재실행 가능
- **자동 트리거**: LLM-B가 “시뮬 필요 여부” 감지, 수동 트리거 버튼도 제공

## 대상/목표
- **대상**: 온라인 쇼핑몰 오너/MD
- **JTBD**: 신규 상품/가격/프로모션 가설에 대해 실제 고객처럼 행동하는 디지털 클론 대화 결과 기반으로 즉시 의사결정

## 핵심 시나리오
1. 오너가 좌측에서 질문(예: “아기 옷 바지 추가하면 살까?”)
2. **LLM-A**: 답변 스트리밍, **LLM-B**: 시뮬 필요 판정 → 필요 시 시뮬 트리거
3. **시뮬레이터**: CSV 기반 코호트/선호/소득/이전 구매/행동에서 n명 샘플링 → 각 클론이 챗봇과 1~4턴 대화 → 중간/최종 구매 여부+이유
4. **집계**: 전체/코호트별 구매율, 상위 이유, 대화 로그(전문/요약) 저장/조회
5. **시각화**: 가운데 패널에서 투표/분포/이유, 우측 패널 히스토리 카드(재실행)

## 범위(MVP)
- 좌측 대화 UI
- 시뮬 필요 감지 자동화(+수동 트리거)
- n개 클론 멀티턴 대화 시뮬
- 집계/시각화
- 히스토리 기록/재실행
- 익명 클론 ID(PII 없음)
- 단일 테넌트, 임시 스토리지(메모리/파일 or SQLite)

## 비범위(해커톤)
- 정식 인증/권한, 멀티테넌트, 장기 영속/분석, 대규모 비용 최적화

## 기술 스택/가이드
- **Next.js(App Router) + TypeScript**
- **Vercel AI SDK**
  - 프런트: `useChat`(좌측 대화 스트리밍)
  - 서버: Responses API 호출(감지/시뮬/요약), 서버 측 fan-out/배치
- **UI**: `assistant-ui`(채팅 UI), Tailwind CSS, shadcn/ui, Lucide
- **상태/데이터**: TanStack Query(업로드/히스토리/재실행/프로그레스 폴링), Zustand(가운데/우측 패널 공유 상태)
- **시각화**: Recharts

## 설계 메모
- **LLM 역할 분리**: LLM-A(대화/조언), LLM-B(시뮬 필요 감지)
- **시뮬 엔진**: 프로필 샘플링 → 멀티턴 루프 → 구매 여부/이유 → 로그 저장 → 요약/집계
- **저장소**: MVP에서는 인메모리/파일 또는 SQLite. 장기 분석은 비범위
- **히스토리**: 실행 요약 카드화, 재실행 시 동일/수정 파라미터로 트리거 가능
- **개인정보**: PII 미수집, 익명 클론 ID만 사용

## 품질 바
- 멀티턴 시뮬은 중단/실패 복구 고려(큐/상태 머신은 심플하게)
- 프런트는 스트리밍 응답, 진행률/상태 표시, 오류 핸들링 명확히
- 차트/집계는 코호트 필터/정렬 최소 제공

전체 상세와 최신 버전은 반드시 [PRD.md](mdc:PRD.md) 원문을 우선한다.